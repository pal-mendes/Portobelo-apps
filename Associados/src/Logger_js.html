
// =========================
// File: Logger_js.html - em Associados (web app)
// =========================
// Logger_js.html (logo no início do script, antes de exportares log/dbg)
(function () {
  try {
    window.log = window.log || function(){ try{ console.log.apply(console, arguments); }catch(_){} };
    window.dbg = window.dbg || function(){};
  } catch (_) {}
})();

/* PB Logger — 2.º <script> no <head> */
(function () {
  try {
    var SV = window.__SERVER_VARS || {};
    var tag = (SV.pageTag || SV.PAGE_TAG || "").trim();

    // debug: server var OU ?debug=1 OU localStorage pbDebug=1
    var DEBUG_ENABLED = SV.debugServer === true;
    try {
      if (!DEBUG_ENABLED && /[?&]debug=1\b/i.test(location.search)) DEBUG_ENABLED = true;
      if (!DEBUG_ENABLED && localStorage.getItem("pbDebug") === "1") DEBUG_ENABLED = true;
    } catch (_) {}

    function out(kind) {
      try {
        var c = (console && console[kind]) ? console[kind] : console.log;
        var args = Array.prototype.slice.call(arguments, 1);

        // prefixo com tag, se existir
        if (tag) args.unshift("[" + tag + "]");
        c.apply(console, args);
      } catch (_) {}
    }

    // Define SEM "||" (para não ficar preso ao stub)
    window.log  = function () { out.apply(null, ["log"  ].concat([].slice.call(arguments))); };
    window.warn = function () { out.apply(null, ["warn" ].concat([].slice.call(arguments))); };
    window.err  = function () { out.apply(null, ["error"].concat([].slice.call(arguments))); };
    window.dbg  = DEBUG_ENABLED
      ? function () { out.apply(null, ["debug"].concat([].slice.call(arguments))); }
      : function () {};

    window.DEBUG = DEBUG_ENABLED;

    // Mostra serverLog, se existir
    if (SV.serverLog) window.log(String(SV.serverLog));
  } catch (_) {}
})();

